/*!
  hey, [be]Lazy.js - v1.8.2 - 2016.10.25
  A fast, small and dependency free lazy load script (https://github.com/dinbror/blazy)
  (c) Bjoern Klinggaard - @bklinggaard - http://dinbror.dk/blazy
*/
!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.Blazy=e()}(this,function(){"use strict";var t,e,o,n,s="src",i="srcset";return function(s){if(!document.querySelectorAll){var i=document.createStyleSheet();document.querySelectorAll=function(t,e,o,n,s){for(s=document.all,e=[],o=(t=t.replace(/\[for\b/gi,"[htmlFor").split(",")).length;o--;){for(i.addRule(t[o],"k:v"),n=s.length;n--;)s[n].currentStyle.k&&e.push(s[n]);i.removeRule(0)}return e}}var a=this,l=a._util={};l.elements=[],l.destroyed=!0,a.options=s||{},a.options.error=a.options.error||!1,a.options.offset=a.options.offset||100,a.options.root=a.options.root||document,a.options.success=a.options.success||!1,a.options.selector=a.options.selector||".b-lazy",a.options.separator=a.options.separator||"|",a.options.multiply=a.options.multiply||"#",a.options.containerClass=a.options.container,a.options.container=!!a.options.containerClass&&document.querySelectorAll(a.options.containerClass),a.options.errorClass=a.options.errorClass||"b-error",a.options.breakpoints=a.options.breakpoints||!1,a.options.loadInvisible=a.options.loadInvisible||!1,a.options.successClass=a.options.successClass||"b-loaded",a.options.validateDelay=a.options.validateDelay||25,a.options.saveViewportOffsetDelay=a.options.saveViewportOffsetDelay||50,a.options.srcset=a.options.srcset||"data-srcset",a.options.src=t=a.options.src||"data-src",n=Element.prototype.closest,o=window.devicePixelRatio>1,(e={}).top=0-a.options.offset,e.left=0-a.options.offset,a.revalidate=function(){r(a)},a.load=function(t,e){var o=this.options;t&&void 0===t.length?f(t,e,o):T(t,function(t){f(t,e,o)})},a.destroy=function(){var t=a._util;a.options.container&&T(a.options.container,function(e){E(e,"scroll",t.validateT)}),E(window,"scroll",t.validateT),E(window,"resize",t.validateT),E(window,"resize",t.saveViewportOffsetT),t.count=0,t.elements.length=0,t.destroyed=!0},l.validateT=k(function(){c(a)},a.options.validateDelay,a),l.saveViewportOffsetT=k(function(){b(a.options.offset)},a.options.saveViewportOffsetDelay,a),b(a.options.offset),T(a.options.breakpoints,function(e){if(e.width>=window.screen.width)return t=e.src,!1}),setTimeout(function(){r(a)})};function r(t){var e=t._util;e.elements=function(t){for(var e=[],o=t.root.querySelectorAll(t.selector),n=o.length;n--;e.unshift(o[n]));return e}(t.options),e.count=e.elements.length,e.destroyed&&(e.destroyed=!1,t.options.container&&T(t.options.container,function(t){C(t,"scroll",e.validateT)}),C(window,"resize",e.saveViewportOffsetT),C(window,"resize",e.validateT),C(window,"scroll",e.validateT)),c(t)}function c(t){var e,o=t._util,n=o.count;for(e=0;e<n;e++){var s=o.elements[e];(a(s,t.options)||w(s,t.options.successClass))&&(t.load(s),o.elements.splice(e,1),o.count--,e--)}0===o.count&&t.destroy()}function a(t,o){var s=t.getBoundingClientRect();if(o.container&&n){var i=t.closest(o.containerClass);if(i){var r=i.getBoundingClientRect();if(l(r,e)){var c=r.top-o.offset,a=r.right+o.offset,f=r.bottom+o.offset,u=r.left-o.offset;return l(s,{top:c>e.top?c:e.top,right:a<e.right?a:e.right,bottom:f<e.bottom?f:e.bottom,left:u>e.left?u:e.left})}return!1}}return l(s,e)}function l(t,e){return t.right>=e.left&&t.bottom>=e.top&&t.left<=e.right&&t.top<=e.bottom}function f(e,n,r){if(!w(e,r.successClass)&&(n||r.loadInvisible||e.offsetWidth>0&&e.offsetHeight>0)){var c=m(e,t)||m(e,r.src);if(c){var a=c.split(r.separator),l=a[o&&a.length>1?1:0],f=m(e,r.srcset),v=g(e,"img"),h=e.parentNode,b=h&&g(h,"picture");if(v||void 0===e.src){var k=new Image,A=function(){r.error&&r.error(e,"invalid"),y(e,r.errorClass),E(k,"error",A),E(k,"load",D)},D=function(){if(v)b||d(e,l,f);else{var t,o,n,s,i;if([],s="",1===(i=(t=l.split(r.multiply)).length))s='url("'+t[0]+'")';else for(o=0,n=i;o<n;o+=1)s+='url("'+t[o]+'")'+(o===i-1?"":" , ");e.style.backgroundImage=s}u(e,r),E(k,"load",D),E(k,"error",A)};b&&(k=e,T(h.getElementsByTagName("source"),function(t){p(t,i,r.srcset)})),C(k,"error",A),C(k,"load",D),d(k,l,f)}else e.src=l,u(e,r)}else g(e,"video")?(T(e.getElementsByTagName("source"),function(t){p(t,s,r.src)}),e.load(),u(e,r)):(r.error&&r.error(e,"missing"),y(e,r.errorClass))}}function u(t,e){y(t,e.successClass),e.success&&e.success(t),h(t,e.src),h(t,e.srcset),T(e.breakpoints,function(e){h(t,e.src)})}function p(t,e,o){var n=m(t,o);n&&(v(t,e,n),h(t,o))}function d(t,e,o){o&&v(t,i,o),t.src=e}function v(t,e,o){t.setAttribute(e,o)}function m(t,e){return t.getAttribute(e)}function h(t,e){t.removeAttribute(e)}function g(t,e){return t.nodeName.toLowerCase()===e}function w(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function y(t,e){w(t,e)||(t.className+=" "+e)}function b(t){e.bottom=(window.innerHeight||document.documentElement.clientHeight)+t,e.right=(window.innerWidth||document.documentElement.clientWidth)+t}function C(t,e,o){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,o):t.addEventListener(e,o,{capture:!1,passive:!0})}function E(t,e,o){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,o):t.removeEventListener(e,o,{capture:!1,passive:!0})}function T(t,e){if(t&&e)for(var o=t.length,n=0;n<o&&!1!==e(t[n],n);n++);}function k(t,e,o){var n=0;return function(){var s=+new Date;s-n<e||(n=s,t.apply(o,arguments))}}});