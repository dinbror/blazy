/*
 hey, [be]Lazy.js - v1.8.2 - 2016.10.25
  A fast, small and dependency free lazy load script (https://github.com/dinbror/blazy)
  (c) Bjoern Klinggaard - @bklinggaard - http://dinbror.dk/blazy
*/
(function(m,g){"function"===typeof define&&define.amd?define(g):"object"===typeof exports?module.exports=g():m.Blazy=g()})(this,function(){function m(b){var c=b._util;c.elements=I(b.options);c.count=c.elements.length;c.destroyed&&(c.destroyed=!1,b.options.container&&p(b.options.container,function(a){q(a,"scroll",c.validateT)}),q(window,"resize",c.saveViewportOffsetT),q(window,"resize",c.validateT),q(window,"scroll",c.validateT));g(b)}function g(b){for(var c=b._util,a=0;a<c.count;a++){var d=c.elements[a],f;a:{var h=d,k=b.options;f=h.getBoundingClientRect();if(k.container&&D&&(h=h.closest(k.containerClass))){var t=h.getBoundingClientRect();if(r(t,e)){var h=t.top-k.offset,u=t.right+k.offset,l=t.bottom+k.offset,k=t.left-k.offset;f=r(f,{top:h>e.top?h:e.top,right:u<e.right?u:e.right,bottom:l<e.bottom?l:e.bottom,left:k>e.left?k:e.left})}else f=!1;break a}f=r(f,e)}if(f||x(d,b.options.successClass))b.load(d),c.elements.splice(a,1),c.count--,a--}0===c.count&&b.destroy()}function r(b,c){return b.right>=c.left&&b.bottom>=c.top&&b.left<=c.right&&b.top<=c.bottom}function y(b,c,a,d){if(!x(b,a.successClass)&&(c||a.loadInvisible||0<b.offsetWidth&&0<b.offsetHeight)){var f=b.getAttribute(z)||b.getAttribute(a.src);if(f){c=f.split(a.separator);var h=c[E&&1<c.length?1:0],k=b.getAttribute(a.srcset),e="img"===b.nodeName.toLowerCase(),u=(c=b.parentNode)&&"picture"===c.nodeName.toLowerCase();if(e||void 0===b.src){var l=new Image,g=function(){d?d(!0):a.error&&a.error(b,"invalid");v(b,a.errorClass);n(l,"error",g);n(l,"load",m)},m=function(){e?u||F(b,h,k):b.style.backgroundImage='url("'+h+'")';A(b,a,!d);d&&d(!1);n(l,"load",m);n(l,"error",g)};u&&(l=b,p(c.getElementsByTagName("source"),function(b){var c=a.srcset,f=b.getAttribute(c);f&&(b.setAttribute("srcset",f),b.removeAttribute(c))}));q(l,"error",g);q(l,"load",m);F(l,h,k)}else b.src=h,"source"===b.nodeName.toLowerCase()&&c.load(),A(b,a,!d),d&&d(!1)}else{var w=b.querySelectorAll("[data-src]");if(w)for(var r=0,B=!1,f=function(c){r++;c&&(B=c);r==w.length&&(1==B&&a.error?(a.error(b,"invalid"),v(b,a.errorClass)):A(b,a,!0,!B))},C=0;C<w.length;C++)y(w[C],c,a,f);else a.error&&a.error(b,"missing"),v(b,a.errorClass)}}}function A(b,c,a,d){v(b,c.successClass);c.success&&a&&c.success(b,d);b.removeAttribute(c.src);b.removeAttribute(c.srcset);p(c.breakpoints,function(a){b.removeAttribute(a.src)})}function F(b,c,a){a&&b.setAttribute("srcset",a);b.src=c}function x(b,c){return-1!==(" "+b.className+" ").indexOf(" "+c+" ")}function v(b,c){x(b,c)||(b.className+=" "+c)}function I(b){var c=[];b=b.root.querySelectorAll(b.selector);for(var a=b.length;a--;c.unshift(b[a]));return c}function G(b){e.bottom=(window.innerHeight||document.documentElement.clientHeight)+b;e.right=(window.innerWidth||document.documentElement.clientWidth)+b}function q(b,c,a){b.attachEvent?b.attachEvent&&b.attachEvent("on"+c,a):b.addEventListener(c,a,{capture:!1,passive:!0})}function n(b,c,a){b.detachEvent?b.detachEvent&&b.detachEvent("on"+c,a):b.removeEventListener(c,a,{capture:!1,passive:!0})}function p(b,c){if(b&&c)for(var a=b.length,d=0;d<a&&!1!==c(b[d],d);d++);}function H(b,c,a){var d=0;return function(){var f=+new Date;f-d<c||(d=f,b.apply(a,arguments))}}var z,e,E,D;return function(b){if(!document.querySelectorAll){var c=document.createStyleSheet();document.querySelectorAll=function(a,b,d,e,g){g=document.all;b=[];a=a.replace(/\[for\b/gi,"[htmlFor").split(",");for(d=a.length;d--;){c.addRule(a[d],"k:v");for(e=g.length;e--;)g[e].currentStyle.k&&b.push(g[e]);c.removeRule(0)}return b}}var a=this,d=a._util={};d.elements=[];d.destroyed=!0;a.options=b||{};a.options.error=a.options.error||!1;a.options.offset=a.options.offset||100;a.options.root=a.options.root||document;a.options.success=a.options.success||!1;a.options.selector=a.options.selector||".b-lazy";a.options.separator=a.options.separator||"|";a.options.containerClass=a.options.container;a.options.container=a.options.containerClass?document.querySelectorAll(a.options.containerClass):!1;a.options.errorClass=a.options.errorClass||"b-error";a.options.breakpoints=a.options.breakpoints||!1;a.options.loadInvisible=a.options.loadInvisible||!1;a.options.successClass=a.options.successClass||"b-loaded";a.options.validateDelay=a.options.validateDelay||25;a.options.saveViewportOffsetDelay=a.options.saveViewportOffsetDelay||50;a.options.srcset=a.options.srcset||"data-srcset";a.options.src=z=a.options.src||"data-src";D=Element.prototype.closest;E=1<window.devicePixelRatio;e={};e.top=0-a.options.offset;e.left=0-a.options.offset;a.revalidate=function(){m(a)};a.load=function(a,b){var c=this.options;a&&void 0===a.length?y(a,b,c):p(a,function(a){y(a,b,c)})};a.destroy=function(){var b=a._util;a.options.container&&p(a.options.container,function(a){n(a,"scroll",b.validateT)});n(window,"scroll",b.validateT);n(window,"resize",b.validateT);n(window,"resize",b.saveViewportOffsetT);b.count=0;b.elements.length=0;b.destroyed=!0};d.validateT=H(function(){g(a)},a.options.validateDelay,a);d.saveViewportOffsetT=H(function(){G(a.options.offset)},a.options.saveViewportOffsetDelay,a);G(a.options.offset);p(a.options.breakpoints,function(a){if(a.width>=window.screen.width)return z=a.src,!1});setTimeout(function(){m(a)})}});